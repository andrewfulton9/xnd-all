

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="index, follow" name="robots" />
<meta content="xndtools notes" name="description" />
<meta content="xnd" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Representation of XND objects &mdash; Plures v0.2.0dev3 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://xnd.io/xndtools/notes/notes1.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Generating new kernels for gumath" href="../tutorials/getting_started.html" />
    <link rel="prev" title="Notes" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/xndlogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v0.2.0dev3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../libxnd/index.html">libxnd</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../xnd/index.html">xnd</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../libgumath/index.html">libgumath</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gumath/index.html">gumath</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">xndtools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#kernel-generator">kernel_generator</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#notes">Notes</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Notes</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Representation of XND objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials">Tutorials</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Releases</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Plures</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">xndtools</a> &raquo;</li>
        
          <li><a href="index.html">Notes</a> &raquo;</li>
        
      <li>Representation of XND objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="representation-of-xnd-objects">
<h1>Representation of XND objects<a class="headerlink" href="#representation-of-xnd-objects" title="Permalink to this headline">¶</a></h1>
<p>The XND project aims at providing a set of C libraries for storing
data (libxnd), for describing the data (libndtypes), and for
manipulating the data (libgumath). Each library is developed
separately, however, libxnd requires libndtypes, and libgumath depends
on both libxnd and libndtypes. In this note libxnd and libndtypes are
discussed, in particular, how xnd objects are represented in memory
and what are the relations between various members of data structures.</p>
<div class="section" id="embedding-data-in-memory">
<h2>Embedding data in memory<a class="headerlink" href="#embedding-data-in-memory" title="Permalink to this headline">¶</a></h2>
<p>In libxnd the data is stored using the following data strucure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xnd_master_t</span>
  <span class="n">flags</span> <span class="p">:</span> <span class="n">uint32_t</span>
  <span class="n">master</span> <span class="p">:</span> <span class="n">xnd_t</span>

<span class="n">xnd_t</span>
  <span class="n">bitmap</span> <span class="p">:</span> <span class="n">xnd_bitmap_t</span>
  <span class="n">index</span> <span class="p">:</span> <span class="n">int64_t</span>
  <span class="nb">type</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">*</span>
  <span class="n">ptr</span> <span class="p">:</span> <span class="n">char</span><span class="o">*</span>

<span class="n">xnd_bitmap_t</span>
  <span class="n">data</span> <span class="p">:</span> <span class="n">uint8_t</span><span class="o">*</span>
  <span class="n">size</span> <span class="p">:</span> <span class="n">int64_t</span>
  <span class="nb">next</span> <span class="p">:</span> <span class="n">xnd_bitmap_t</span><span class="o">*</span>

<span class="n">ndt_bytes_t</span>
  <span class="n">size</span> <span class="p">:</span> <span class="n">int64_t</span>
  <span class="n">data</span> <span class="p">:</span> <span class="n">uint8_t</span><span class="o">*</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">*</span></code> represents pointer values of the corresponding data types.
The corresponding C <cite>typedef</cite> definitions are in <cite>libxnd/xnd.h</cite>.</p>
<p>A short decription of data type members is given in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_master_t::flags</span></code></td>
<td>Contains ownership information about the <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, and <code class="docutils literal notranslate"><span class="pre">ptr</span></code> members. Needed for memory management.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_master_t::master</span></code></td>
<td>An xnd view of data.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::bitmap</span></code></td>
<td>Implements optional value support.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::index</span></code></td>
<td>Linear index of data items. Used only when <code class="docutils literal notranslate"><span class="pre">type-&gt;tag</span></code> is <code class="docutils literal notranslate"><span class="pre">FixedDim|VarDim</span></code> (data is an array of items).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::type</span></code></td>
<td>Points to a type value (<code class="docutils literal notranslate"><span class="pre">ndt_t</span></code> is provided by libndtypes, see below).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::ptr</span></code></td>
<td>Points to a computer memory where data is embedded. Data can be stored as bytes (<code class="docutils literal notranslate"><span class="pre">ptr</span></code> points to <code class="docutils literal notranslate"><span class="pre">ndt_bytes_t</span></code> value) or referred by its pointer value (<code class="docutils literal notranslate"><span class="pre">ptr</span></code> points to data value pointer). In the case of arrays and <code class="docutils literal notranslate"><span class="pre">type-&gt;ndim==0</span></code>, <code class="docutils literal notranslate"><span class="pre">ptr</span></code> points to the data item given by <code class="docutils literal notranslate"><span class="pre">index</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_bitmap_t::data</span></code></td>
<td>Points to a bitmap data. Each data item (in <code class="docutils literal notranslate"><span class="pre">ptr</span></code>) has the corresponding bit value in <code class="docutils literal notranslate"><span class="pre">data</span></code>. Bit value <code class="docutils literal notranslate"><span class="pre">0</span></code> means that data item value has been provided.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_bitmap_t::size</span></code></td>
<td>Number of subtree bitmaps. This is nonzero when <code class="docutils literal notranslate"><span class="pre">type-&gt;tag</span></code> is <code class="docutils literal notranslate"><span class="pre">Tuple|Record|Ref|Constr|Nominal</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_bitmap_t::next</span></code></td>
<td>Refers to bitmaps of subtrees. Used when data has tree-like structure.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_bytes_t::size</span></code></td>
<td>Number of bytes needed to store data.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_bytes_t::data</span></code></td>
<td>Points to computer memory where data is stored as bytes.</td>
</tr>
</tbody>
</table>
<p>Note that the linear index is varied during iterations.</p>
</div>
<div class="section" id="typing-the-data">
<h2>Typing the data<a class="headerlink" href="#typing-the-data" title="Permalink to this headline">¶</a></h2>
<p>Typing the data means attaching a meaning to a junk of data stored in
computer memory.  The libndtypes implements data types using ndtypes
type language ( Blaze datashape) that combines the shape and element
type information in one unit. Note that ndtypes is similar to the
Python based implementation of Blaze datashape but there are several
differences to make these distinct.</p>
<p>Ndtypes uses the following data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ndt_t</span>
  <span class="n">tag</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt</span> <span class="p">{</span><span class="n">Module</span><span class="p">,</span> <span class="n">Function</span><span class="p">,</span> <span class="n">AnyKind</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">Typevar</span><span class="p">}</span>
  <span class="n">access</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_access</span> <span class="p">{</span><span class="n">Abstract</span><span class="p">,</span> <span class="n">Concrete</span><span class="p">}</span>
  <span class="n">flags</span> <span class="p">:</span> <span class="n">uint32_t</span>
  <span class="n">ndim</span> <span class="p">:</span> <span class="nb">int</span>
  <span class="n">datasize</span> <span class="p">:</span> <span class="n">int64_t</span>
  <span class="n">align</span> <span class="p">:</span> <span class="n">uint16_t</span>

  <span class="o">//</span> <span class="n">Abstract</span> <span class="n">part</span>
  <span class="n">union</span>
    <span class="n">Module</span>
      <span class="n">name</span> <span class="p">:</span> <span class="n">char</span><span class="o">*</span>
      <span class="nb">type</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">*</span>
    <span class="n">Function</span>
      <span class="n">nin</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">nout</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">nargs</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">types</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">**</span>
    <span class="n">FixedDim</span> <span class="o">|</span> <span class="n">SymbolicDim</span> <span class="o">|</span> <span class="n">EllipsisDim</span> <span class="o">|</span> <span class="n">Constr</span>
      <span class="n">shape</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="nb">type</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">*</span>
    <span class="n">VarDim</span> <span class="o">|</span> <span class="n">Ref</span>
      <span class="nb">type</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">*</span>
    <span class="n">Tuple</span>
      <span class="n">flag</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_variadic</span> <span class="p">{</span><span class="n">Nonvariadic</span><span class="p">,</span> <span class="n">Variadic</span><span class="p">}</span>
      <span class="n">shape</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">types</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">**</span>
    <span class="n">Record</span>
      <span class="n">flag</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_variadic</span>
      <span class="n">shape</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">names</span> <span class="p">:</span> <span class="n">char</span><span class="o">**</span>
      <span class="n">types</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">**</span>

  <span class="n">Concrete</span>
    <span class="n">union</span>
      <span class="n">FixedDim</span>
        <span class="n">itemsize</span> <span class="p">:</span> <span class="n">int64_t</span>
        <span class="n">step</span> <span class="p">:</span> <span class="n">int64_t</span>
      <span class="n">VarDim</span>
        <span class="n">flag</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_offsets</span> <span class="p">{</span><span class="n">InternalOffsets</span><span class="p">,</span> <span class="n">ExternalOffsets</span><span class="p">}</span>
        <span class="n">itemsize</span> <span class="p">:</span> <span class="n">int64_t</span>
        <span class="n">noffsets</span> <span class="p">:</span> <span class="n">int32_t</span>
        <span class="n">offsets</span> <span class="p">:</span> <span class="n">int32_t</span><span class="o">*</span>
        <span class="n">nslices</span> <span class="p">:</span> <span class="nb">int</span>
        <span class="n">slices</span> <span class="p">:</span> <span class="n">ndt_slice_t</span><span class="o">*</span><span class="p">;</span>
      <span class="n">Tuple</span> <span class="o">|</span> <span class="n">Record</span>
        <span class="n">offset</span> <span class="p">:</span> <span class="n">int64_t</span><span class="o">*</span>
        <span class="n">align</span> <span class="p">:</span> <span class="n">uint16_t</span><span class="o">*</span>
        <span class="n">pad</span> <span class="p">:</span> <span class="n">uint16_t</span><span class="o">*</span>
      <span class="n">Nominal</span>
        <span class="n">name</span> <span class="p">:</span> <span class="n">char</span><span class="o">*</span>
        <span class="nb">type</span> <span class="p">:</span> <span class="n">ndt_t</span><span class="o">*</span>
        <span class="n">meth</span> <span class="p">:</span> <span class="n">ndt_methods_t</span><span class="o">*</span>
      <span class="n">Categorical</span>
        <span class="n">ntypes</span> <span class="p">:</span> <span class="n">int64_t</span>
        <span class="n">types</span> <span class="p">:</span> <span class="n">ndt_value_t</span><span class="o">*</span>
      <span class="n">FixedString</span>
        <span class="n">size</span> <span class="p">:</span> <span class="n">int64_t</span>
        <span class="n">encoding</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_encoding</span> <span class="p">{</span><span class="n">Ascii</span><span class="p">,</span> <span class="n">Utf8</span><span class="p">,</span> <span class="n">Utf16</span><span class="p">,</span> <span class="n">Utf32</span><span class="p">,</span> <span class="n">Ucs2</span><span class="p">}</span>
      <span class="n">FixedBytes</span>
        <span class="n">size</span> <span class="p">:</span> <span class="n">int64_t</span>
        <span class="n">align</span> <span class="p">:</span> <span class="n">uint16_t</span>
      <span class="n">Bytes</span>
        <span class="n">align</span> <span class="p">:</span> <span class="n">uint16_t</span>
      <span class="n">Char</span>
        <span class="n">encoding</span> <span class="p">:</span> <span class="n">enum</span> <span class="n">ndt_encoding</span>
      <span class="n">Typevar</span>
        <span class="n">name</span> <span class="p">:</span> <span class="n">char</span><span class="o">*</span>
</pre></div>
</div>
<p>While the definition of <code class="docutils literal notranslate"><span class="pre">ndt_t</span></code> looks long, the union parts share
the same memory and the interpretation of this depends on the
ndtypes kind (specified by <code class="docutils literal notranslate"><span class="pre">ndt_t::tag</span></code> member).</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ndt_t</span></code> holds both the shape and item type information of
the xnd view object.</p>
<p>The ndtypes implementation <code class="docutils literal notranslate"><span class="pre">ndt_t</span></code> can be used in two modes,
<em>abstract</em> or <em>concrete</em>, specified by <code class="docutils literal notranslate"><span class="pre">ndt_t::access</span></code> member.  The
ndtypes is in concrete mode when it contains enough information
needed to compute what is the contiguous memory size (<code class="docutils literal notranslate"><span class="pre">datasize</span></code>)
that fits the first and last item of the data. Otherwise the
ndtypes is in abstract mode.</p>
<p>The abstract ndtypes can be used only as patterns.  The concrete
ndtypes can be used as patterns as well as for describing the
structure of a data stored in a xnd view object (<code class="docutils literal notranslate"><span class="pre">xnd_t</span></code> instance).</p>
<p>Here follows a summary of data type members:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::tag</span></code></td>
<td>Specifies ndtypes kind.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::access</span></code></td>
<td>Specifies ndtypes mode, abstract or concrete.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::flags</span></code></td>
<td>Contains various information about the data type: endianess, optional, subtree, ellipses.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::ndim</span></code></td>
<td>Specifies dimension index. Ndtypes with <code class="docutils literal notranslate"><span class="pre">ndim==0</span></code> is interpreted as the ndtypes of a scalar value.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>Size of data item in bytes [undefined in abstract mode]</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>Alignemnt of data in bytes [undefined in abstract mode]</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Module</span></code></td>
<td>Abstract part of <code class="docutils literal notranslate"><span class="pre">Module</span></code> type kind.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">...</span></code></td>
<td>…</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::FixedDim</span></code></td>
<td>Concrete part of <code class="docutils literal notranslate"><span class="pre">FixedDim</span></code> type kind.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">...</span></code></td>
<td>…</td>
</tr>
</tbody>
</table>
<p>In the following each ndtypes kind is described in separate subsections.</p>
<div class="section" id="arrays">
<h3>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h3>
<p>Array is a data structure that contains data items of the same data
type.  When data items use the same amount of memory, representation
of an array is particularly simple: one only needs to know the
location of the first data item in memory and the byte-size of data
item type in order to have access to any data item in the array.
However, there exists data types such as strings or ragged arrayswhere
the data item byte-size depends on the data item content and a more
general representation of array structure is needed.</p>
<p>In libndtypes several kinds of array representations are supported.</p>
<p>In abstract mode one can represent arrays of different item types
(named type variable), of different dimensions (ellipses), and of
different shapes (symbolic dimensions) using a single ndtypes
instance. The purpose of such ndtypes instances is to define
patterns of arrays that is used in libgumath. The libgumath library
provides computational kernels that implement algorithms to manipulate
data with specific structure. The kernels can be called only on data
that ndtypes matches the signature of a particular kernel.</p>
<p>In concrete mode the main purpose of a ndtypes instance is to provide
information how to access the data items in an array (using also the member <code class="docutils literal notranslate"><span class="pre">xnd_t::index</span></code>).</p>
<div class="section" id="abstract-array-ndtypes">
<h4>Abstract array ndtypes<a class="headerlink" href="#abstract-array-ndtypes" title="Permalink to this headline">¶</a></h4>
<p>Ndtypes is in abstract mode when <code class="docutils literal notranslate"><span class="pre">ndt_t::access==Abstract</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==FixedDim</span></code></td>
<td>Ndtypes represents an array dimension with fixed shape value</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::FixedDim::shape</span></code></td>
<td>Specifies the shape value of the array dimension</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::FixedDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::...</span></code></td>
<td>undefined</td>
</tr>
</tbody>
</table>
<p><em>Undefined</em> means that the value is set to <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">FixedDim</span></code> ndtypes is in abstract mode when <code class="docutils literal notranslate"><span class="pre">type</span></code> ndtypes is in abstract mode.</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==VarDim</span></code></td>
<td>Ndtypes represents an array dimension that shape may vary</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::VarDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::...</span></code></td>
<td>undefined</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==SymbolicDim</span></code></td>
<td>Ndtypes represents an array dimension that shape is a symbolic.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::SymbolicDim::name</span></code></td>
<td>Contains symbol name.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::SymbolicDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::...</span></code></td>
<td>undefined</td>
</tr>
</tbody>
</table>
<p>The shape symbol must start with a capital letter.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==EllipsisDim</span></code></td>
<td>Ndtypes represents 0 or more dimensions.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::EllipsisDim::name</span></code></td>
<td>Contains ellipsis name.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::EllipsisDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>undefined</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::...</span></code></td>
<td>undefined</td>
</tr>
</tbody>
</table>
<p>The named ellipsis name must start with a capital letter or be equal
to <code class="docutils literal notranslate"><span class="pre">'var'</span></code>.  Ellipsis <code class="docutils literal notranslate"><span class="pre">var...</span></code> is special and it is used only for
ragged arrays (when <code class="docutils literal notranslate"><span class="pre">ndt_t::tag==VarDim</span></code>).</p>
</div>
<div class="section" id="concrete-array-ndtypes">
<h4>Concrete array ndtypes<a class="headerlink" href="#concrete-array-ndtypes" title="Permalink to this headline">¶</a></h4>
<p>Ndtypes is in concrete mode when <code class="docutils literal notranslate"><span class="pre">ndt_t::access==Concrete</span></code>.</p>
<p>In the case of fixed shape arrays we have:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==FixedDim</span></code></td>
<td>Ndtypes represents an array dimension with fixed shape value</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::FixedDim::shape</span></code></td>
<td>Specifies the shape value of the array dimension</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::FixedDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>Specifies the byte-size of array data</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>Alignment of data item.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::FixedDim::itemsize</span></code></td>
<td>Specifies the byte-size of array item.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::FixedDim::step</span></code></td>
<td>Specifies the byte-step to the next item in array. E.g. in the case of slice view the step is a integer multiple of itemsize.</td>
</tr>
</tbody>
</table>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">datasize</span></code> is defined as the byte-size of memory that
is occupied between the first and the last array item (including the
items that are discarded due to slicing with <code class="docutils literal notranslate"><span class="pre">step!=1</span></code>). So,
<code class="docutils literal notranslate"><span class="pre">datasize</span></code> does not correspond to the size of memory needed to hold
the data defined by xnd view, it only defines the upper bound.</p>
<p>In the case of ragged arrays we have:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::tag==VarDim</span></code></td>
<td>Ndtypes represents an array dimension that shape may vary</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ndt_t::FixedDim::type</span></code></td>
<td>Points to data item type specification.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::datasize</span></code></td>
<td>Specifies the byte-size of array data</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::align</span></code></td>
<td>Alignment of data item.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::flag</span></code></td>
<td>Specifies the ownership of offsets data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::itemsize</span></code></td>
<td>Specifies the byte-size of array item.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::noffsets</span></code></td>
<td>Specifies the byte-size of <code class="docutils literal notranslate"><span class="pre">offsets</span></code> member.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::offsets</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::nslices</span></code></td>
<td>Specifies the byte-size of <code class="docutils literal notranslate"><span class="pre">slices</span></code> member.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">xnd_t::Concrete::VarDim::slices</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tutorials/getting_started.html" class="btn btn-neutral float-right" title="Generating new kernels for gumath" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Plures Project
      <span class="lastupdated">
        Last updated on True.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>